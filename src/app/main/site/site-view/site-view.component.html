<div class="site-view" *ngIf="site">
  <h1 class="title has-text-centered">{{ site.name }}</h1>
  <p-tabView>
    <p-tabPanel>
      <ng-template pTemplate="header">
        <span class="">
          <i class="{{ ICON.INFORMATION }} mr-2"></i>
          {{ 'common.information' | translate }}</span
        >
      </ng-template>
      <div class="is-flex is-flex-direction-column">
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.ROUTE_NUMBER }} mr-1"></i
            >{{ 'site.averageRouteNumber' | translate }}
          </span>
          {{ site.averageRouteNumber }}
        </p>
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.EXPOSITION }} mr-1"></i
            >{{ 'common.exposition' | translate }}
          </span>
          <span *ngFor="let expo of site.expositions" class="mr-1">{{
            expo.label
          }}</span>
        </p>
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.ROCK_TYPE }} mr-1"></i
            >{{ 'site.rockType' | translate }}</span
          >
          {{ site.rockType.label }}
        </p>
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.MIN_LEVEL }} mr-1"></i
            >{{ 'site.minLevel' | translate }}
          </span>
          {{ site.minLevel.label }}
        </p>
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.MAX_LEVEL }} mr-1"></i
            >{{ 'site.maxLevel' | translate }}
          </span>
          {{ site.maxLevel.label }}
        </p>
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.ROUTE_HEIGHT }} mr-1"></i>
            {{ 'site.averageRouteHeight' | translate }}
          </span>
          {{ site.averageRouteHeight }} metres
        </p>
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.ROUTE }} mr-1"></i>
            {{ 'common.routeProfile' | translate }}
          </span>

          <span *ngFor="let profile of site.routeProfiles" class="mr-1">{{
            profile.label
          }}</span>
        </p>
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.EQUIPMENT }} mr-1"></i>
            {{ 'common.equipment' | translate }}
          </span>
          {{ site.equipment.label }}
        </p>
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.ENGAGEMENT }} mr-1"></i>
            {{ 'common.engagement' | translate }}
          </span>
          {{ site.engagement.label }}
        </p>
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.APPROACH_TIME }} mr-1"></i>
            {{ 'common.approachTime' | translate }}
          </span>
          {{ site.approachTime }}
        </p>
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.APPROACH_TYPE }} mr-1"></i>
            {{ 'common.approachType' | translate }}
          </span>
          {{ site.approachType.label }}
        </p>
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.ROUTE_FOOT }} mr-1"></i>
            {{ 'site.routeFoot' | translate }}
          </span>
          {{ site.routeFoot.label }}
        </p>
      </div>
    </p-tabPanel>
    <p-tabPanel>
      <ng-template pTemplate="header">
        <span (click)="showMapMainParking()">
          <i class="{{ ICON.LOCATION }} mr-2"></i
          >{{ 'site.carPark' | translate }}</span
        >
      </ng-template>
      <ng-template pTemplate="content">
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.REGION }} mr-1"></i>
            {{ 'site.region' | translate }} :
          </span>
          {{ site.region.name }}
        </p>
        <p class="subtitle">
          <span [class]="textInfo">
            <i class="{{ ICON.DEPARTMENT }} mr-1"></i>
            {{ 'site.department' | translate }} :
          </span>
          {{ site.department.name }}
        </p>
        <app-map [mapOption]="mapOption"></app-map>
      </ng-template>
    </p-tabPanel>
    <p-tabPanel *ngIf="isLogged">
      <ng-template pTemplate="header">
        <span (click)="showMapSecondaryParking()">
          <i class="{{ ICON.VAN }} mr-2"></i>
          {{ 'site.carParkForNight' | translate }}</span
        >
      </ng-template>
      <ng-template pTemplate="content">
        <p class="subtitle">
          <span class="{{ site.network ? textInfo : textDanger }}">
            <i class="{{ ICON.NETWORK }} mr-1"></i>
            {{
              site.network
                ? ('site.network' | translate)
                : ('site.noNetwork' | translate)
            }}
          </span>
        </p>
        <p class="subtitle">
          <span class="{{ site.wc ? textInfo : textDanger }}">
            <i class="{{ ICON.WC }} mr-1"></i>
            {{
              site.wc
                ? ('site.toilet' | translate)
                : ('site.noToilet' | translate)
            }}
          </span>
        </p>
        <p class="subtitle">
          <span class="{{ site.water ? textInfo : textDanger }}">
            <i class="{{ ICON.WATER }} mr-1"></i>
            {{
              site.water
                ? ('site.water' | translate)
                : ('site.noWater' | translate)
            }}
          </span>
        </p>
        <p class="subtitle">
          <span class="{{ site.river ? textInfo : textDanger }}">
            <i class="{{ ICON.RIVER }} mr-1"></i>
            {{
              site.river
                ? ('site.river' | translate)
                : ('site.noRiver' | translate)
            }}
          </span>
        </p>
        <div class="is-flex is-justify-content-center">
          <app-map [mapOption]="mapOption"></app-map>
        </div>
      </ng-template>
    </p-tabPanel>
    <p-tabPanel>
      <ng-template pTemplate="header">
        <span>
          <i class="{{ ICON.SECTOR }} mr-2"></i>
          {{ 'common.sectors' | translate }}</span
        >
      </ng-template>
      <p class="subtitle">
        <span [class]="textInfo">
          <i class="{{ ICON.SECTOR }} mr-1"></i>
          {{ 'site.totalSector' | translate }} :
        </span>
        {{ site.sectors.length }}
      </p>
      <p class="subtitle" *ngFor="let sector of site.sectors; let i = index">
        <span class="has-text-info">
          {{ 'common.sector' | translate }} {{ i + 1 }} :
        </span>
        {{ sector.name }}
      </p>
    </p-tabPanel>
    <p-tabPanel>
      <ng-template pTemplate="header">
        <span>
          <i class="{{ ICON.ROUTE }} mr-2"></i
          >{{ 'common.routes' | translate }}</span
        >
      </ng-template>
      <div class="has-text-centered">
        <p class="p-3 subtitle" *ngIf="routes.length === 0">
          {{ 'site.noRouteRegistered' | translate }}"
        </p>
        <button
          pButton
          pRipple
          label="{{ 'navbar.addRoute' | translate }}"
          [routerLink]="[routeNewUrl]"
          class="p-button p-button-outlined my-3"></button>
      </div>
      <app-table-routes [routes]="routes"></app-table-routes>
    </p-tabPanel>
    <p-tabPanel *ngIf="isLogged">
      <ng-template pTemplate="header">
        <span> <i class="{{ ICON.TOPO }} mr-2"></i>Topo</span>
      </ng-template>
    </p-tabPanel>
    <p-tabPanel *ngIf="isAdmin">
      <ng-template pTemplate="header">
        <a [routerLink]="[siteEditUrl + site.id]" [class]="textDanger">
          <i class="{{ ICON.EDIT }} mr-2"></i>{{ 'edit' | translate }}</a
        >
      </ng-template>
    </p-tabPanel>
    <p-tabPanel>
      <ng-template pTemplate="header">
        <a [routerLink]="[siteListUrl]" [class]="textInfo">
          <i class="{{ ICON.VAN }} mr-2"></i>
          {{ 'common.backToList' | translate }}</a
        >
      </ng-template>
    </p-tabPanel>
  </p-tabView>
</div>
