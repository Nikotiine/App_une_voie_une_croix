<h1 class="has-text-centered title mt-5">{{ title }}</h1>

<form [formGroup]="form">
  <div class="wrapper-dropdown">
    <p-dropdown
      [options]="sites"
      optionLabel="name"
      placeholder="Choisir un site"
      [filter]="true"
      filterBy="name"
      formControlName="site"
      (onChange)="onChangeSite($event.value)"
      optionValue="id"></p-dropdown>
  </div>
  <div class="form-register is-flex-direction-column" *ngIf="showForm">
    <div class="input-label">
      <label for="exposition" class="label">
        <span class="has-text-info">
          <i class="{{ iconExposition }} mr-1"></i>Exposition :
        </span>
      </label>

      <p-dropdown
        [options]="secteurs"
        class="mt-3"
        optionLabel="name"
        placeholder="Choisir le secteur"
        [filter]="true"
        filterBy="name"
        formControlName="secteur"
        optionValue="id"></p-dropdown>
    </div>
    <div class="input-label">
      <label for="lastName" class="label">
        <span class="has-text-info">
          <i class="{{ iconRoute }} mr-1"></i>Nom de la voie :
        </span></label
      >
      <span class="p-input-icon-left">
        <i class="pi pi-user"></i>
        <input type="text" pInputText id="lastName" formControlName="name" />
      </span>
    </div>

    <div class="wrapper-input">
      <div class="input-label">
        <label for="exposition" class="label">
          <span class="has-text-info">
            <i class="{{ iconExposition }} mr-1"></i>Exposition :
          </span>
        </label>

        <p-dropdown
          [options]="expositions"
          optionLabel="label"
          id="exposition"
          placeholder="Expositions"
          formControlName="exposition"
          optionValue="id"></p-dropdown>
      </div>
      <div class="input-label">
        <label for="routeProfile" class="label">
          <span class="has-text-info">
            <i class="{{ iconRoute }} mr-1"></i>Profil :
          </span>
        </label>
        <p-dropdown
          [options]="routeProfiles"
          optionLabel="label"
          id="routeProfile"
          placeholder="Type de voie"
          formControlName="routeProfile"
          optionValue="id"></p-dropdown>
      </div>
      <div class="input-label">
        <label for="level" class="label">
          <span class="has-text-info">
            <i class="{{ iconMaxLevel }} mr-1"></i> Niveau
          </span>
        </label>
        <p-dropdown
          optionLabel="label"
          [options]="levels"
          optionValue="id"
          placeholder="Niveau"
          formControlName="level"
          id="level"></p-dropdown>
      </div>
    </div>

    <div class="input-label">
      <label for="equipment" class="label">
        <span class="has-text-info">
          <i class="{{ iconEquipment }} mr-1"></i> Equipement :
        </span>
      </label>
      <p-dropdown
        optionLabel="label"
        [options]="equipments"
        optionValue="id"
        formControlName="equipment"
        placeholder="Equipement"
        id="equipment"></p-dropdown>
    </div>
    <div class="input-label">
      <label for="engagement" class="label"
        ><span class="has-text-info">
          <i class="{{ iconEngagement }} mr-1"></i> Engagement :
        </span>
      </label>
      <p-dropdown
        optionLabel="label"
        [options]="engagements"
        optionValue="id"
        formControlName="engagement"
        placeholder="Engagement"
        id="engagement"></p-dropdown>
    </div>

    <div class="input-label">
      <label for="height" class="label"
        ><span class="has-text-info">
          <i class="{{ iconRouteHeight }} mr-1"></i>Hauteur :
        </span></label
      >
      <p-inputNumber
        id="height"
        [showButtons]="true"
        suffix=" metre"
        formControlName="height"></p-inputNumber>
    </div>
    <div class="input-label">
      <label for="quickdraw" class="label"
        ><span class="has-text-info">
          <i class="{{ iconQuickdraw }} mr-1"></i>Degaine :
        </span></label
      >
      <p-inputNumber
        id="quickdraw"
        [showButtons]="true"
        formControlName="quickdraw"></p-inputNumber>
    </div>

    <div class="is-flex mt-4 width-20 is-justify-content-space-between mb-3">
      <button
        pButton
        type="button"
        label="Annuler"
        class="p-button-secondary p-button-outlined"
        [routerLink]="['']"></button>
      <button
        pButton
        type="button"
        label="Valider"
        (click)="submit()"
        [disabled]="form.invalid"
        class="p-button p-button-outlined"></button>
    </div>
  </div>
</form>
